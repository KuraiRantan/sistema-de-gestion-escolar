(()=>{"use strict";var e={309:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function d(e){try{o(i.next(e))}catch(e){a(e)}}function s(e){try{o(i.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,s)}o((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StudentController=void 0;const r=n(161),a=n(106),d=n(793),s=n(253);class o{static init(){const e=document.querySelector("#container-form-create-student");if(null===e)throw new Error("Container not found in the DOM");(new d.StudentRenderer).render(e);const t=document.querySelector("#form-create-student");if(null===t)throw new Error("Form create student not found in the DOM");t.addEventListener("submit",o.handleSubmitCreate)}static handleSubmitCreate(e){return i(this,void 0,void 0,(function*(){if(e.preventDefault(),e.target instanceof HTMLFormElement){const t=e.target.elements,n=t.namedItem("gender"),i=n.options[n.selectedIndex].value,d=t.namedItem("typeOfIdentification"),o=d.options[d.selectedIndex].value,l={firstName:t.namedItem("firstName").value,lastName:t.namedItem("lastName").value,identification:t.namedItem("identification").value,address:t.namedItem("address").value,email:t.namedItem("email").value,phone:t.namedItem("phone").value,gender:a.Gender[i],typeOfIdentification:a.TypeOfIdentifications[o],currentGrade:t.namedItem("currentGrade").value,birthdate:new Date(t.namedItem("birthdate").value)},c=r.StudentFactory.create(l);try{yield s.StudentRepository.create(c),alert("Estudiante creado exitosamente."),e.target.reset()}catch(e){alert("Fallo al crear el estudiante: "+e.message)}}}))}}t.StudentController=o},161:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StudentFactory=void 0;const i=n(459);t.StudentFactory=class{static create(e){if(""===e.identification.replace(/ /g,"")||""===e.firstName.replace(/ /g,"")||""===e.lastName.replace(/ /g,"")||""===e.currentGrade.replace(/ /g,""))throw new Error("The required fields cannot be empty.");if(isNaN(e.birthdate.getTime()))throw new Error("The birthdate field must be a valid date.");return new i.Student(void 0,e.typeOfIdentification,e.identification,e.firstName,e.lastName,e.birthdate,e.gender,e.address,e.email,e.phone,e.currentGrade)}}},303:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,n,i,r,a,d,s,o){this._typeOfIdentification=e,this._identification=t,this._firstName=n,this._lastName=i,this._birthdate=r,this._gender=a,this._address=d,this._email=s,this._phone=o}get typeOfIdentification(){return this._typeOfIdentification}set typeOfIdentification(e){this._typeOfIdentification=e}get identification(){return this._identification}set identification(e){this._identification=e}get firstName(){return this._firstName}set firstName(e){this._firstName=e}get lastName(){return this._lastName}set lastName(e){this._lastName=e}get birthdate(){return this._birthdate}set birthdate(e){this._birthdate=e}get gender(){return this._gender}set gender(e){this._gender=e}get address(){return this._address}set address(e){this._address=e}get email(){return this._email}set email(e){this._email=e}get phone(){return this._phone}set phone(e){this._phone=e}}},459:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Student=void 0;const r=n(308),a=i(n(303));class d extends a.default{constructor(e,t,n,i,r,a,d,s,o,l,c){super(t,n,i,r,a,d,s,o,l),this._id=e,this._currentGrade=c}get id(){return this._id}set id(e){this._id=e}get currentGrade(){return this._currentGrade}set currentGrade(e){this._currentGrade=e}validate(){return!0}getDataObject(){return{id:this._id,type_of_identification:this._typeOfIdentification,identification:this._identification,first_name:this._firstName,last_name:this._lastName,birthdate:null!=this._birthdate?(0,r.formatDate)(this._birthdate):void 0,gender:this._gender,address:this._address,email:this._email,phone:this._phone,current_grade:this._currentGrade}}}t.Student=d},106:(e,t)=>{var n,i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.AttendanceStatus=t.Gender=t.TypeOfIdentifications=void 0,function(e){e.IC="Identity Card",e.CC="Citizenship Card",e.CR="Civil Registration",e.FI="Foreigner Id"}(n||(t.TypeOfIdentifications=n={})),function(e){e.M="Male",e.F="Female",e.O="Other"}(i||(t.Gender=i={})),function(e){e.PRESENT="Present",e.ABSENT="Absent",e.LATE="Late"}(r||(t.AttendanceStatus=r={}))},793:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StudentRenderer=t.Render=void 0;const i=n(106),r=n(583);t.Render=class{};class a{init(){if(null!==a.htmlElement)return;const e=(0,r.createElementWithAttributes)("form",{id:"form-create-student"}),t=(0,r.createElementWithAttributes)("select",{required:"",name:"gender"}),n=(0,r.createElementWithAttributes)("select",{required:"",name:"typeOfIdentification"});Object.keys(i.Gender).forEach((e=>{const n=document.createElement("option");n.value=e,n.text=i.Gender[e],t.appendChild(n)})),Object.keys(i.TypeOfIdentifications).forEach((e=>{const t=document.createElement("option");t.value=e,t.text=i.TypeOfIdentifications[e],n.appendChild(t)}));const d=(0,r.createElementWithAttributes)("input",{type:"text",name:"firstName",placeholder:"Ingrese su nombre...",required:""}),s=(0,r.createElementWithAttributes)("input",{type:"text",name:"lastName",placeholder:"Ingrese su apellido...",required:""}),o=(0,r.createElementWithAttributes)("input",{type:"text",name:"identification",placeholder:"Ingrese su número de identificación...",required:""}),l=(0,r.createElementWithAttributes)("input",{type:"text",name:"address",placeholder:"Ingrese su dirección..."}),c=(0,r.createElementWithAttributes)("input",{type:"email",name:"email",placeholder:"Ingrese su correo electrónico..."}),u=(0,r.createElementWithAttributes)("input",{type:"phone",name:"phone",placeholder:"Ingrese su número de teléfono..."}),h=(0,r.createElementWithAttributes)("input",{type:"text",name:"currentGrade",placeholder:"Ingrese su grado actual...",required:""}),m=(0,r.createElementWithAttributes)("input",{type:"date",name:"birthdate",required:""}),p=(0,r.createElementWithAttributes)("input",{type:"submit"}),f=(0,r.createElementWithAttributes)("label",{style:"display:block"}),b=(0,r.createElementWithAttributes)("label",{style:"display:block"}),y=(0,r.createElementWithAttributes)("label",{style:"display:block"}),_=(0,r.createElementWithAttributes)("label",{style:"display:block"}),v=(0,r.createElementWithAttributes)("label",{style:"display:block"}),E=(0,r.createElementWithAttributes)("label",{style:"display:block"}),g=(0,r.createElementWithAttributes)("label",{style:"display:block"}),C=(0,r.createElementWithAttributes)("label",{style:"display:block"}),I=(0,r.createElementWithAttributes)("label",{style:"display:block"}),O=(0,r.createElementWithAttributes)("label",{style:"display:block"});f.textContent="Nombre(s):",f.appendChild(d),b.textContent="Apellido(s):",b.appendChild(s),y.textContent="Identificación:",y.appendChild(o),_.textContent="Dirección:",_.appendChild(l),v.textContent="Email:",v.appendChild(c),E.textContent="Teléfono:",E.appendChild(u),g.textContent="Género:",g.appendChild(t),C.textContent="Tipo de identificacion:",C.appendChild(n),I.textContent="Grado:",I.appendChild(h),O.textContent="Fecha de nacimiento:",O.appendChild(m),e.append(f,b,y,C,O,g,I,_,v,E,p),a.htmlElement=e}render(e){if(this.init(),null===a.htmlElement)throw new Error("Failed to create html element for student form");e.appendChild(a.htmlElement)}}t.StudentRenderer=a,a.htmlElement=null},253:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function d(e){try{o(i.next(e))}catch(e){a(e)}}function s(e){try{o(i.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,s)}o((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StudentRepository=void 0,t.StudentRepository=class{static create(e){return n(this,void 0,void 0,(function*(){try{const t=yield fetch(`${window.location.origin}/SGE/api/student.json`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.getDataObject())});if(!t.ok)throw new Error("Failed to create student: "+t.statusText+t);yield t.json()}catch(e){throw e}}))}}},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createElementWithAttributes=void 0,t.createElementWithAttributes=function(e,t){const n=document.createElement(e);for(let e in t)n.setAttribute(e,t[e]);return n}},308:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=void 0,t.formatDate=function(e){const t=e.getUTCDate(),n=e.getUTCMonth()+1;return`${e.getUTCFullYear()}-${n}-${t}`}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}(()=>{const e=n(309);document.addEventListener("DOMContentLoaded",(()=>{"/SGE/student/create"===window.location.pathname.replace(".html","")&&e.StudentController.init()}))})()})();